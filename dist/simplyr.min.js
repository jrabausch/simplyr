!function e(t,n,i){function s(r,d){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!d&&u)return u(r,!0);if(a)return a(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var l=n[r]={exports:{}};t[r][0].call(l.exports,(function(e){return s(t[r][1][e]||e)}),l,l.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const i=e("./events");n.default=class{constructor(e){this.currentTarget=null,this.dragging=!1,this.rangeElement=document.querySelector('input[type="range"]'),this.timeElement=document.querySelector(".timeline .time"),this.durationElement=document.querySelector(".timeline .duration"),this.rangeElement.addEventListener("change",this.rangeChange.bind(this)),this.rangeElement.addEventListener("input",this.rangeInput.bind(this)),e.addEventListener("audio-loaded",this.onAudioLoaded.bind(this)),e.addEventListener("time-update",this.onTimeUpdate.bind(this))}onAudioLoaded(e){this.setDuration(e.detail.duration),this.currentTarget=e.target}onTimeUpdate(e){this.setCurrentTime(e.detail.currentTime)}rangeChange(){var e;this.dragging=!1;const t=parseInt(this.rangeElement.value,10);null===(e=this.currentTarget)||void 0===e||e.dispatchEvent(new i.TimeSeekEvent({position:t}))}rangeInput(){this.dragging=!0;const e=parseInt(this.rangeElement.value,10);this.timeElement.innerHTML=this.timeString(e)}timeString(e){const t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n);return n+":"+(i<10?"0"+i:i)}setCurrentTime(e){this.dragging||(this.rangeElement.value=e.toString(),this.timeElement.innerHTML=this.timeString(e))}setDuration(e){this.rangeElement.max=e.toString(),this.durationElement.innerHTML=this.timeString(e)}}},{"./events":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const i=e("./events");n.default=class{constructor(e){this.currentTarget=null,this.audio=new Audio,this.audio.preload="metadata",this.audio.addEventListener("timeupdate",this.onTimeUpdate.bind(this)),this.audio.addEventListener("loadedmetadata",this.onLoadedMetadata.bind(this)),this.audio.addEventListener("ended",this.onEnded.bind(this)),e.addEventListener("play-pause",this.onPlayPause.bind(this)),e.addEventListener("time-seek",this.onTimeSeek.bind(this))}onPlayPause(e){const t=e.target;t!==this.currentTarget&&(this.pause(),this.loadAudioSrc(e.detail.audio),this.currentTarget=t),this.togglePlay()}onTimeSeek(e){this.seek(e.detail.position)}onTimeUpdate(e){var t;null===(t=this.currentTarget)||void 0===t||t.dispatchEvent(new i.TimeUpdateEvent({currentTime:this.audio.currentTime}))}onLoadedMetadata(e){var t;null===(t=this.currentTarget)||void 0===t||t.dispatchEvent(new i.AudioLoadedEvent({duration:this.audio.duration}))}isPlaying(){return!this.audio.paused}onEnded(e){this.pause(),this.audio.currentTime=0}togglePlay(){this.isPlaying()?this.pause():this.play()}loadAudioSrc(e){this.audio.src=e,this.audio.load()}play(){var e;this.audio.play(),null===(e=this.currentTarget)||void 0===e||e.dispatchEvent(new i.PlayingEvent)}pause(){var e;this.audio.pause(),null===(e=this.currentTarget)||void 0===e||e.dispatchEvent(new i.PausedEvent)}seek(e){this.audio.currentTime=e}jump(e){this.audio.currentTime+=e}}},{"./events":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const i=e("./events");n.default=class{constructor(e){this.element=e,this.element.addEventListener("click",this.onClick.bind(this)),this.element.addEventListener("playing",this.onPlaying.bind(this)),this.element.addEventListener("paused",this.onPaused.bind(this))}onClick(e){const t=this.element.dataset.title||"",n=this.element.dataset.sub||"",s=this.element.dataset.audio||"",a=new i.PlayPauseEvent({title:t,sub:n,audio:s});this.element.blur(),this.element.dispatchEvent(a)}onPlaying(){this.element.dataset.playing="true"}onPaused(){this.element.dataset.playing="false"}}},{"./events":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TimeSeekEvent=n.TimeUpdateEvent=n.AudioLoadedEvent=n.PausedEvent=n.PlayingEvent=n.PlayPauseEvent=void 0;class i extends CustomEvent{constructor(e){super("play-pause",{bubbles:!0,detail:e})}}n.PlayPauseEvent=i;class s extends CustomEvent{constructor(){super("playing",{bubbles:!1})}}n.PlayingEvent=s;class a extends CustomEvent{constructor(){super("paused",{bubbles:!1})}}n.PausedEvent=a;class r extends CustomEvent{constructor(e){super("audio-loaded",{bubbles:!0,detail:e})}}n.AudioLoadedEvent=r;class d extends CustomEvent{constructor(e){super("time-update",{bubbles:!0,detail:e})}}n.TimeUpdateEvent=d;class u extends CustomEvent{constructor(e){super("time-seek",{bubbles:!0,detail:e})}}n.TimeSeekEvent=u},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const i=e("./Controls"),s=e("./Player"),a=e("./Track");window.Simplyer={Player:s.default,Track:a.default,Controls:i.default}},{"./Controls":1,"./Player":2,"./Track":3}]},{},[5]);
